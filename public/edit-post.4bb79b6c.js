var e=globalThis,t={},o={},n=e.parcelRequire6684;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},e.parcelRequire6684=n),n.register;var a=n("e1C8v");const r=document.getElementById("post-form"),i=document.getElementById("title"),l=document.getElementById("content"),d=document.getElementById("categories-container"),c=document.getElementById("form-error"),s=new URLSearchParams(window.location.search).get("id");async function m(){if(!s){window.location.href="/";return}try{let[e,t]=await Promise.all([a.getPostById(s),a.getCategories()]);i.value=e.title,l.value=e.content;let o=new Set(e.categories.map(e=>e.id));t.forEach(e=>{let t=o.has(e.id),n=document.createElement("div");n.className="checkbox-item",n.innerHTML=`
        <input type="checkbox" id="category-${e.id}" name="categoryIds" value="${e.id}" ${t?"checked":""}>
        <label for="category-${e.id}">${e.name}</label>
      `,d.appendChild(n)})}catch(e){c.textContent=`Failed to load post data: ${e.message}`,c.style.display="block"}}r.addEventListener("submit",async e=>{e.preventDefault(),c.style.display="none";let t=new FormData(r),o={title:t.get("title"),content:t.get("content"),categoryIds:t.getAll("categoryIds")};try{await a.updatePost(s,o),window.location.href=`/post.html?id=${s}`}catch(e){c.textContent=`Failed to update post: ${e.message}`,c.style.display="block"}}),document.addEventListener("DOMContentLoaded",m);
//# sourceMappingURL=edit-post.4bb79b6c.js.map
